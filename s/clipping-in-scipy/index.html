<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Shauna Gordon-McKeon" />
        <meta name="copyright" content="Shauna Gordon-McKeon" />

        <meta name="description" content="I found SciPy when searching for projects that were both in the domain of scientific research and statistical analysis, and written in the python programming language. (SciPy refers to both the scientific computing library I contributed to, as well as the general open source package which also includes projects like iPython and Matplotlib.) I felt a bit intimidated at first, because I&#39;m not an expert in statistics or python, so I decided to start with one of the issues labeled easy_fix. I browsed through many of the issues before finding one that I thought I had a prayer of being able to handle...
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="project - scipy, helped by - maintainer, helped by - web search, helped by - documentation, difficulties encountered - testing, tools used - git, featured, misc, " />

<meta property="og:title" content="Clipping functions in SciPy "/>
<meta property="og:url" content="http://mergestories.com/s/clipping-in-scipy/" />
<meta property="og:description" content="I found SciPy when searching for projects that were both in the domain of scientific research and statistical analysis, and written in the python programming language. (SciPy refers to both the scientific computing library I contributed to, as well as the general open source package which also includes projects like iPython and Matplotlib.) I felt a bit intimidated at first, because I&#39;m not an expert in statistics or python, so I decided to start with one of the issues labeled easy_fix. I browsed through many of the issues before finding one that I thought I had a prayer of being able to handle..." />
<meta property="og:site_name" content="Merge Stories" />
<meta property="og:article:author" content="Shauna Gordon-McKeon" />
<meta property="og:article:published_time" content="2014-06-10T18:05:00" />
<meta name="twitter:title" content="Clipping functions in SciPy ">
<meta name="twitter:description" content="I found SciPy when searching for projects that were both in the domain of scientific research and statistical analysis, and written in the python programming language. (SciPy refers to both the scientific computing library I contributed to, as well as the general open source package which also includes projects like iPython and Matplotlib.) I felt a bit intimidated at first, because I&#39;m not an expert in statistics or python, so I decided to start with one of the issues labeled easy_fix. I browsed through many of the issues before finding one that I thought I had a prayer of being able to handle...">

        <title>Clipping functions in SciPy  Â· Merge Stories
</title>
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://mergestories.com/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://mergestories.com/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://mergestories.com/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://mergestories.com/theme/css/custom.css" media="screen">
        <link href='http://fonts.googleapis.com/css?family=Delius' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Merriweather+Sans:700,400,800' rel='stylesheet' type='text/css'>
        <link href="http://mergestories.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Merge Stories - Full Atom Feed" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
        <div class="navbar-inner">

                <div class="container-fluid">
        <a class="brand" href="http://mergestories.com/"><img src=" http://mergestories.com/images/pg.png">
        <span class=site-name>Merge Stories <br /> <span class="site-description">A project of OpenHatch</span></span></a> 
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://mergestories.com">Home</a></li>
                            <li ><a href="http://mergestories.com/about.html">About</a></li>
                            <li ><a href="http://mergestories.com/submit.html">Submit</a></li>
                            <li ><a href="http://mergestories.com/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://mergestories.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<div class="row-fluid filler">
</div>

<div class="row-fluid">
    <div class="span9">

        <article>
            <div class="row-fluid">
                <header class="page-header span12">
                    <h1>Clipping functions in SciPy </h1>
                </header>
            </div>
            <div class="row-fluid">
                <div class="span12 article-content">
                    
                    <p>I found <a href="http://www.scipy.org/">SciPy</a> when searching for projects that were both in the domain of scientific research and statistical analysis, and written in the python programming language.  (SciPy refers to both the scientific computing library I contributed to, as well as the general open source package which also includes projects like iPython and Matplotlib.)  I felt a bit intimidated at first, because I'm not an expert in statistics or python, so I decided to start with one of the <a href="https://github.com/scipy/scipy/issues?labels=easy-fix&amp;page=1&amp;state=open">issues labeled easy_fix</a>.  I browsed through many of the issues before finding one that I thought I had a prayer of being able to handle.  </p>
<p><a href="https://github.com/scipy/scipy/issues/2566">The issue I picked</a> dealt with the following problem.  Probabilities must be between 0 and 1.  The limit of zero means "no chance of happening" while the limit of 1 means "will always happen".  A probability of greater than 1 therefore makes no sense.  However, due to unavoidable <a href="https://en.wikipedia.org/wiki/Round-off_error">rounding errors</a>, occasionally probabilities were being produced that were greater than 1.  The person who reported the issue, a maintainer, suggested that the numpy function clip be used to deal with this problem.  </p>
<p>My first step was to figure out where to make this change.  The person who reported the issue had asked to change the probabilities titled "cdf, sf, pmf".  I did a search for each of these using Github's search-repository interface.  There were many results, but only one file where the functions were defined (<a href="https://github.com/scipy/scipy/blob/16fc0af7191dce0cfd5fa80afb3a85b50d58cbcf/scipy/stats/_distn_infrastructure.py">this one</a>), so that seemed like a good place to start.  Rather than go too far down the wrong path, I left a quick comment asking for confirmation and got a helpful reply.  With the help of the numpy documentation for the suggested function, clip, I was able to implement this change fairly easily, but I wasn't done yet!  </p>
<p>The maintainer asked me to time the function before and after my changes.  They didn't want to accept the change if it slowed things down too much.  I'd never timed anything before, and at their suggestion explored the <a href="https://docs.python.org/2/library/timeit.html">Timeit python library</a>.  I found this to be an interesting and useful tool to learn about.  Harder was choosing some "normal" and "slow" test functions -- I am not familiar enough with statistics to have an intuition of which distributions are easy to calculate and which are hard to calculate.  I searched through the documentation and issues for references to "slow" distributions until I was able to find one.  </p>
<p>I commented with the results from Timeit, only to discover that more challenges lay ahead!  First, the maintainer asked me to implement a unit test.  This is a very reasonable request, but I don't have a formal programming background and I'd never worked with unit tests before.  I was able to muddle through with the help of the maintainer, but I wish I'd had resources like <a href="http://nedbatchelder.com/text/test0.html">Ned Bachtelder's talk on unit testing at PyCon 2014</a> to consult!  The maintainer also advised me to develop on a separate branch from master and to use the SciPy standard acronyms when making commit messages.  Luckily I was already familiar with branching in git and amending commits and pull requests, and was able to make these changes fairly easily.  (To refresh, though, I used this great <a href="https://www.atlassian.com/git/tutorial/git-branches">branching tutorial</a>.)  </p>
<p>Unfortunately, when I added my tests, things did not work perfectly - my changes induced no less than 8 failures.  It turned out that one of the distributions affected by the change was incompatible with it, and I had to remove the clipping function from more than half of the places I'd added it.  Another issue was with how I'd written the test, which was by building it into a pre-existing test. This didn't make much sense - with unit tests, I now know it's good practice to test each behavior separately - and  at the maintainer's suggestion, I split it off into a new test.  At this point, we were finally finished.  </p>
<p>I learned a <em>ton</em> from making this contribution, thanks in large part due to the extensive help from Evgeni Burovski, the maintainer I was working with.  I highly recommend contributing to SciPy, and hope to do so again soon!</p>
<p>Relevant Links:
<a href="https://github.com/scipy/scipy/pull/3211">Patch</a></p>
                    
                    
                    <hr/>
                </div>        
            </div>
        </article>
    </div>
    <div class="span3">
        <section>
            <div class="filler">
            </div>
            <div class="span12" style="float:right;font-size:0.9em;">
                    <h3>Submitted By</h3>
                    <a href="http://mergestories.com/author/shauna-gordon-mckeon.html" rel="author">Shauna Gordon-McKeon</a>

                    <h3>Published</h3>
                    <time pubdate="pubdate" datetime="2014-06-10T18:05:00">Jun 10, 2014</time>
                    <h3>Category</h3>
                    <a class="category-link" href="http://mergestories.com/categories.html#misc-ref">misc</a>
                    <h3>Tags</h3>
<ul class="list-of-tags tags-in-article">
            difficulties encountered  <br />
        <b><a href="http://mergestories.com/tag/difficulties-encountered-build.html">  build</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/difficulties-encountered-testing.html">  testing</a>(2)</b><br />
        <b><a href="http://mergestories.com/tag/difficulties-encountered-unfamiliar-with-foss.html">  unfamiliar with FOSS</a>(1)</b><br />
            
        <b><a class="no-space-left" href="http://mergestories.com/tag/featured.html"> featured</a>(4)</b><br />
            
        <b><a class="no-space-left" href="http://mergestories.com/tag/first-contribution.html"> first contribution</a>(1)</b><br />
            helped by  <br />
        <b><a href="http://mergestories.com/tag/helped-by-community-members.html">  community members</a>(3)</b><br />
        <b><a href="http://mergestories.com/tag/helped-by-documentation.html">  documentation</a>(3)</b><br />
        <b><a href="http://mergestories.com/tag/helped-by-friend.html">  friend</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/helped-by-irc.html">  IRC</a>(3)</b><br />
        <b><a href="http://mergestories.com/tag/helped-by-mailing-list.html"> mailing list</a>(2)</b><br />
        <b><a href="http://mergestories.com/tag/helped-by-maintainer.html">  maintainer</a>(3)</b><br />
        <b><a href="http://mergestories.com/tag/helped-by-web-search.html">  web search</a>(2)</b><br />
            kind of contribution  <br />
        <b><a href="http://mergestories.com/tag/kind-of-contribution-bug-report.html">  bug report</a>(2)</b><br />
        <b><a href="http://mergestories.com/tag/kind-of-contribution-code.html">  code</a>(3)</b><br />
        <b><a href="http://mergestories.com/tag/kind-of-contribution-community-management.html">  community management</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/kind-of-contribution-community-mangement.html">  community mangement</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/kind-of-contribution-misc.html">  misc</a>(1)</b><br />
            project  <br />
        <b><a href="http://mergestories.com/tag/project-adacamp.html">  adacamp</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/project-debian.html">  debian</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/project-drupal.html">  drupal</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/project-gimp.html">  gimp</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/project-iron-blogger.html">  iron blogger</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/project-openhatch.html">  openhatch</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/project-python.html">  python</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/project-sahana.html">  sahana</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/project-scipy.html">  scipy</a>(1)</b><br />
            setting  <br />
        <b><a href="http://mergestories.com/tag/setting-conference.html">  conference</a>(1)</b><br />
        <b><a href="http://mergestories.com/tag/setting-sprint.html">  sprint</a>(2)</b><br />
            tools used  <br />
        <b><a href="http://mergestories.com/tag/tools-used-git.html">  git</a>(1)</b><br />
</a>
</ul>            </div>
        </section>
    </div>
</div>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15096810-2', 'mergestories.com');
  ga('send', 'pageview');

        </script>
    </body>
</html>